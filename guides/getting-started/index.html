<!DOCTYPE html>
<html>
	<head>
		
			<title>Getting Started</title>
		
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		
		<link rel="icon" type="image/png" href="../../_static/icon.png"/>
		<link rel="stylesheet" href="../../_static/site.css" type="text/css" media="screen"/>
		
		<script src="../../_components/jquery/jquery.min.js"></script>
		<script src="../../_components/jquery-syntax/jquery.syntax.min.js"></script>
		
		<script src="../../_static/links.js"></script>
		
		<script type="text/javascript">
		//<![CDATA[
			jQuery(function($) {
				$.syntax();
			});
		//]]>
		</script>
	</head>

	<body>
		<header> › <a class="link" href="../../index.html">Project</a> › <a class="link" href="../index.html">Guides</a></header>
		
		<main>
			
	<h1>Getting Started</h1>
	
	<p>This guide explains how to use <code>localhost</code> for provisioning local TLS certificates for development.</p>
<section id="installation"><h2>Installation</h2>
<p>Add the gem to your project:</p>
<pre><code class="language-bash">$ bundle add localhost
</code></pre>
</section><section id="core-concepts"><h2>Core Concepts</h2>
<p><code>localhost</code> has one core concept:</p>
<ul>
<li>A <a href="../../source/Localhost/Authority/index.html" title="Localhost::Authority"><code class="language-ruby">class Localhost::Authority</code></a> instance which represents a public and private key pair that can be used for both clients and servers.</li>
</ul>
</section><section id="usage"><h2>Usage</h2>
<p>This example shows how to generate a certificate for an SSL secured server:</p>
<pre><code class="language-ruby">require 'socket'
require 'thread'

require 'localhost/authority'

# Get the self-signed authority for localhost:
authority = Localhost::Authority.fetch

ready = Thread::Queue.new

# Start a server thread:
server_thread = Thread.new do
	server = OpenSSL::SSL::SSLServer.new(TCPServer.new(&quot;localhost&quot;, 4050), authority.server_context)
	
	server.listen
	
	ready &lt;&lt; true
	
	peer = server.accept
	
	peer.puts &quot;Hello World!&quot;
	peer.flush
	
	peer.close
end

ready.pop

client = OpenSSL::SSL::SSLSocket.new(TCPSocket.new(&quot;localhost&quot;, 4050), authority.client_context)

# Initialize SSL connection:
client.connect

# Read the encrypted message:
puts client.read(12)

client.close
server_thread.join
</code></pre>
<p>If you use Safari to access such a server, it will allow you to add the certificate to your keychain without much work. Once you've done this, you won't need to do it again for any other site when running such a development environment from the same user account.</p>
</section><section id="safari"><h3>Safari</h3>
<p>If you use this with a web server, when you open the site in Safari:</p>
<p><img src="safari.png" alt="Safari"/></p>
<ul>
<li>Click &quot;View the certificate&quot; to check that it is the correct certificate.</li>
<li>Click &quot;visit this website&quot; which will prompt you to add the certificate to your keychain. Once you've done this, it should work for a long time.</li>
</ul>
</section><section id="chrome"><h3>Chrome</h3>
<p>If you use this with a web server, when you open the site in Chrome:</p>
<p><img src="chrome.png" alt="Chrome"/></p>
<ul>
<li>Click &quot;ADVANCED&quot; to see additional details, including...</li>
<li>Click &quot;Proceed to localhost (unsafe)&quot; which will allow you to use the site for the current browser session.</li>
</ul>
</section><section id="self-signed-localhost"><h4>Self-Signed Localhost</h4>
<p>The best way to use Chrome with self-signed localhost certificates is to allow it in your chrome settings: <a href="chrome://flags/#allow-insecure-localhost">chrome://flags/#allow-insecure-localhost</a>.</p>
</section><section id="files"><h3>Files</h3>
<p>The certificate and private key are stored in <code>~/.localhost/</code>. You can delete them and they will be regenerated. If you added the certificate to your keychain, you'll probably want to delete that too.</p>
</section>
				
			<footer>Documentation generated by <a href="https://github.com/socketry/utopia-project">Utopia::Project</a>.</footer>
		</main>
	</body>
</html>